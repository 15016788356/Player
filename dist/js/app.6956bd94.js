(function(t){function e(e){for(var n,i,c=e[0],a=e[1],u=e[2],l=0,d=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);f&&f(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},i={app:0},s={app:0},o=[];function c(t){return a.p+"js/"+({}[t]||t)+"."+{"chunk-06bfda36":"4989bafc","chunk-1972d1e7":"188e7f0a","chunk-2f9c4fa1":"5263c92a","chunk-300c5f9a":"46ad2288","chunk-629c5aab":"95c43411","chunk-76814149":"26f41c82","chunk-b6e71724":"d4339de5"}[t]+".js"}function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(t){var e=[],r={"chunk-06bfda36":1,"chunk-1972d1e7":1,"chunk-2f9c4fa1":1,"chunk-300c5f9a":1,"chunk-629c5aab":1,"chunk-76814149":1,"chunk-b6e71724":1};i[t]?e.push(i[t]):0!==i[t]&&r[t]&&e.push(i[t]=new Promise((function(e,r){for(var n="css/"+({}[t]||t)+"."+{"chunk-06bfda36":"1450fda7","chunk-1972d1e7":"ab9cf17d","chunk-2f9c4fa1":"35185915","chunk-300c5f9a":"de852dbc","chunk-629c5aab":"fb1f3109","chunk-76814149":"9ca3faae","chunk-b6e71724":"146188a6"}[t]+".css",s=a.p+n,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=o[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===s))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===n||l===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||s,o=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete i[t],f.parentNode.removeChild(f),r(o)},f.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){i[t]=0})));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,r){n=s[t]=[e,r]}));e.push(n[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=c(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var r=s[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",d.name="ChunkLoadError",d.type=n,d.request=i,r[1](d)}s[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"093a":function(t,e,r){},"0a86":function(t,e,r){"use strict";r("a9e3");var n,i,s={name:"icon",props:{type:{type:String,required:!0},size:{type:Number,default:16}},methods:{getIconCls:function(){return"icon-".concat(this.type)},getIconStyle:function(){return{fontSize:this.size+"px"}},onClick:function(t){this.$emit("click",t)}},render:function(){var t=arguments[0],e=t("i",{on:{click:this.onClick},class:"iconfont ".concat(this.getIconCls()),style:this.getIconStyle()});return e}},o=s,c=(r("12fa"),r("2877")),a=Object(c["a"])(o,n,i,!1,null,null,null);e["a"]=a.exports},"0f4c":function(t,e,r){},"0f64":function(t,e,r){"use strict";var n=r("ebee"),i=r.n(n);i.a},"12fa":function(t,e,r){"use strict";var n=r("6198"),i=r.n(n);i.a},2262:function(t,e,r){t.exports=r.p+"img/player_cover.373e0739.png"},2395:function(t,e,r){},"2e88":function(t,e,r){"use strict";var n=r("f2fb"),i=r.n(n);i.a},"365c":function(t,e,r){"use strict";var n=r("bc3a"),i=r.n(n),s=r("db49"),o={getPlaylist:function(){return i.a.get("/playlist/detail?id=3778678")},getDetail:function(){return i.a.get("/toplist/detail")},getTopList:function(){return i.a.get("/personalized")},getPlaylistDetail:function(t){return i.a.get("/playlist/detail?id=".concat(t))},searchHot:function(){return i.a.get("/search/hot")},search:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s["b"];return i.a.get("/search",{params:{offset:e*r,limit:r,keywords:t}})},getLyric:function(t){return i.a.get("https://api.mtnhao.com/lyric?id=".concat(t))},getMusicDetail:function(t){return i.a.get("https://api.mtnhao.com/song/detail",{params:{ids:t}})},getMusicComment:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s["b"];return i.a.get("https://api.mtnhao.com/comment/music",{params:{offset:e*r,limit:r,id:t}})},getBuffer:function(){return i.a.get("/api/song/media/outer/url?id=536096151.mp3",{responseType:"arraybuffer"})}};e["a"]=o},"3cab":function(t,e,r){"use strict";var n=r("63a0"),i=r.n(n);i.a},"4acf":function(t,e,r){"use strict";var n=r("093a"),i=r.n(n);i.a},"56d7":function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"audioEle",(function(){return Qt})),r.d(n,"mode",(function(){return Zt})),r.d(n,"playing",(function(){return te})),r.d(n,"playlist",(function(){return ee})),r.d(n,"orderList",(function(){return re})),r.d(n,"currentIndex",(function(){return ne})),r.d(n,"currentMusic",(function(){return ie})),r.d(n,"historyList",(function(){return se}));var i={};r.r(i),r.d(i,"setPlaylist",(function(){return he})),r.d(i,"selectPlay",(function(){return ye})),r.d(i,"selectAddPlay",(function(){return ge})),r.d(i,"clearPlayList",(function(){return be})),r.d(i,"removePlayListItem",(function(){return Oe})),r.d(i,"setHistory",(function(){return je})),r.d(i,"removeHistory",(function(){return Pe})),r.d(i,"clearHistory",(function(){return _e})),r.d(i,"setPlayMode",(function(){return Ce}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("MHeader"),r("router-view",{staticClass:"router-view"}),r("audio",{ref:"Player"})],1)},c=[],a=(r("a4d3"),r("4de4"),r("4160"),r("fb6a"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",[t._m(0),r("span",{on:{click:t.handleLogin}},[t._v("登录")])])},l=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h1",[r("a",{attrs:{href:""}},[t._v("音乐播放器")])])}],d={methods:{handleLogin:function(){}}},f=d,p=r("2877"),m=Object(p["a"])(f,u,l,!1,null,null,null),h=m.exports,v=r("eb4d"),y=r("365c"),g=r("2f62");function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var j={data:function(){return{playSrc:""}},computed:{},methods:O({_formatSongs:function(t){var e=[];return t.forEach((function(t){var r=t;r.id&&e.push(Object(v["a"])(r))})),e}},Object(g["d"])({setAudioEle:"SET_AUDIOELE"}),{},Object(g["b"])(["setPlaylist"])),mounted:function(){var t=this;y["a"].getPlaylist().then((function(e){if(200==e.status){var r=t._formatSongs(e.data.playlist.tracks.slice(0,100));t.setPlaylist({list:r})}})),this.$nextTick((function(){t.setAudioEle(t.$refs.Player)})),window.audio=this.$refs.Player},watch:{},components:{MHeader:h}},P=j,_=(r("7c55"),Object(p["a"])(P,o,c,!1,null,null,null)),C=_.exports,E=(r("d3b7"),r("8c4f")),k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"music"},[r("div",{staticClass:"music-content"},[r("div",{staticClass:"music-left"},[r("MusicBtn"),r("keep-alive",[t.$route.meta.keepAlive?r("router-view",{staticClass:"music-list",on:{del:t.del}}):t._e()],1),t.$route.meta.keepAlive?t._e():r("router-view",{staticClass:"music-list",on:{del:t.del}})],1),r("lyric",{staticClass:"music-right",attrs:{lyric:t.lyric,noLyric:t.noLyric,"lyric-index":t.lyricIndex,picUrl:t.picUrl}})],1),r("div",{ref:"musicBar",staticClass:"music-bar",class:{disable:!t.musicReady||t.currentMusic.id}},[r("div",{ref:"musicBarBtn",staticClass:"music-bar-btns"},[r("icon",{staticClass:"pointer",attrs:{type:"prev",size:36,title:"上一曲 Ctrl + Left"},on:{click:t.prev}}),r("div",{staticClass:"control-play pointer",attrs:{title:"播放暂停 Ctrl + Space"},on:{click:t.play}},[r("icon",{attrs:{type:t.playing?"pause":"play",size:24}})],1),r("icon",{staticClass:"pointer",attrs:{type:"next",size:36,title:"下一曲 Ctrl + Right"},on:{click:t.next}})],1),r("div",{staticClass:"music-music"},[r("div",{staticClass:"music-bar-info"},[t.currentMusic&&t.currentMusic.id?[t._v(" "+t._s(t.currentMusic.name)+" "),r("span",[t._v(" - "+t._s(t.currentMusic.singer))])]:[t._v(" 欢迎使用音乐播放器 ")]],2),t.currentMusic.id?r("div",{staticClass:"music-bar-time"},[t._v(t._s(t._f("format")(t.currentTime))+"/"+t._s(t._f("format")(t.currentMusic.duration%3600)))]):t._e(),r("MProgress",{staticClass:"music-progress",attrs:{percent:t.percentMusic,"percent-progress":t.currentProgress},on:{progressChange:t.progressMusic,next:t.next}})],1),r("icon",{staticClass:"icon-color pointer mode",attrs:{type:t.getModeIconType(),title:t.getModeIconTitle(),size:30},on:{click:t.modeChange}}),r("icon",{staticClass:"icon-color pointer comment",attrs:{type:"comment",size:30},on:{click:t.openComment}}),r("div",{staticClass:"music-bar-volume",attrs:{title:"音量加减 [Ctrl + Up / Down]"}},[r("volume",{attrs:{volume:t.volume},on:{volumeChange:t.volumeChange}})],1)],1),r("div",{ref:"playBg",staticClass:"play-bg",style:{backgroundImage:"url("+t.playBg+")"}}),r("div",{staticClass:"play-mask"})])},w=[],x=(r("c740"),r("c975"),r("a9e3"),r("b680"),r("53ca"));r("99af"),r("ac1f"),r("5319"),r("1276"),r("498a");function M(t,e){var r=-1,n=t.length;e||(e=new Array(n));while(++r<n)e[r]=t[r];return e}var T=function(t){var e=null==t?0:t.length;if(!e)return[];var r=-1,n=e-1,i=M(t);while(++r<e){var s=r+Math.floor(Math.random()*(n-r+1)),o=i[s];i[s]=i[r],i[r]=o}return i};function L(t){return t<10?"0"+t:t}var I=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g;function S(t){for(var e=t.split("\n"),r=[],n=0;n<e.length;n++){var i=e[n],s=I.exec(i);if(s){var o=i.replace(I,"").trim();o&&r.push({time:(6e4*s[1]+1e3*s[2]+1*(s[3]||0))/1e3,text:o})}}return r}function $(t){var e=Math.floor(t/60),r=Math.floor(t%60);return"".concat(L(e),":").concat(L(r))}var D=r("db49"),A=(r("a434"),window.localStorage),U={get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(A)return A.getItem(t)?Array.isArray(e)?JSON.parse(A.getItem(t)):A.getItem(t):e},set:function(t,e){A&&A.setItem(t,e)},clear:function(t){A&&A.removeItem(t)}},N="__player_historyList_",R=200;function W(){return U.get(N)}function z(t){var e=U.get(N),r=e.findIndex((function(e){return e.id===t.id}));return 0==r?e:(r>0&&e.splice(r,1),e.unshift(t),R&&e.length>R&&e.pop(),U.set(N,JSON.stringify(e)),e)}function V(t){return U.set(N,JSON.stringify(t)),t}function B(){return U.clear(N),[]}var H="__Player_mode_";function X(){return U.get(H,null)}function Y(t){return U.set(H,t),t}var q="__Player_volume_";function J(){var t=U.get(q,D["c"]);return Number(t)}var K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"music-right"},[t.currentMusic.currentMusic.currentMusic?[r("dl",{staticClass:"music-info"},[r("dt",[r("img",{attrs:{src:t.currentMusic.currentMusic.musicImg,alt:""}})]),r("dd",[t._v("歌曲名："+t._s(t.currentMusic.currentMusic.songName))]),r("dd",[t._v("歌手名："+t._s(t.currentMusic.currentMusic.singer))]),r("dd",[t._v("专辑："+t._s(t.currentMusic.currentMusic.album))])])]:[t._m(0),r("div",{staticClass:"music-lyric"})]],2)},F=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"music-info"},[r("dt",[r("img",{attrs:{src:"http://music.mtnhao.com/img/player_cover.373e0739.png",alt:""}})]),r("dd",[t._v("Vue音乐播放器")]),r("dd",[t._v("皮皮虾")])])}];function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Z={props:{currentMusic:{default:{}},mtnhao:{default:""}},computed:Q({musicPicUrl:function(){return this.currentMusic.id?"".concat(this.currentMusic.image,"?param=300y300"):r("2262")}},Object(g["c"])(["currentMusic"])),mounted:function(){}},tt=Z,et=(r("0f64"),Object(p["a"])(tt,K,F,!1,null,null,null)),rt=et.exports,nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("dl",{staticClass:"music-info"},[r("dt",[r("img",{attrs:{src:t.picUrl,alt:""}})]),t.currentMusic.id?[r("dd",[t._v("歌曲名："+t._s(t.currentMusic.name))]),r("dd",[t._v("歌手名："+t._s(t.currentMusic.singer))]),r("dd",[t._v("专辑名："+t._s(t.currentMusic.album))])]:[r("dd",[t._v("Vue音乐播放器")]),r("dd",[r("a",{attrs:{href:"https://vuex.vuejs.org/zh/",target:"_blank"}},[r("icon",{attrs:{type:"github",size:14}},[t._v("vue")])],1)])]],2),r("div",{ref:"musicLyric",staticClass:"music-lyric"},[r("div",{staticClass:"music-lyric-items",style:t.lyricTop},[t.currentMusic.id?t.noLyric?r("p",[t._v("暂无歌词")]):t.lyric.length>0?t._l(t.lyric,(function(e,n){return r("p",{key:n,class:{on:t.lyricIndex==n}},[t._v(" "+t._s(e.text)+" ")])})):r("p",[t._v(" 歌词加载失败 ")]):r("p",[t._v("没有播放音乐哦！")])],2)])])},it=[];function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ct={data:function(){return{top:0}},props:{lyric:{type:Array,default:function(){return[]}},noLyric:{type:Boolean,default:!1},lyricIndex:{type:Number,default:0},picUrl:{type:String,default:""}},computed:ot({musicPicUrl:function(){return this.currentMusic.id?"".concat(this.currentMusic.image,"?param=300y300)"):r("2262")},lyricTop:function(){return"transform: translate3d(0, ".concat(-34*(this.lyricIndex-this.top),"px, 0)")}},Object(g["c"])(["currentMusic"])),mounted:function(){var t=this;window.addEventListener("resize",(function(){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout((function(){return t.clacTop()}),60)})),this.$nextTick((function(){return t.clacTop()}))},updated:function(){},methods:{clacTop:function(){var t=this.$refs.musicLyric,e=window.getComputedStyle(t),r=e.display,n=void 0===r?"":r;if("none"!=n){var i=t.offsetHeight;this.top=Math.floor(i/34/2)}}}},at=ct,ut=(r("8081"),Object(p["a"])(at,nt,it,!1,null,"3a43f668",null)),lt=ut.exports,dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"music-bar"},[r("div",{staticClass:"music-bar-btns"},[r("i",{staticClass:"pointer iconfont icon-prev"}),r("div",{staticClass:"control-play pointer"},[t.isPlay?r("i",{staticClass:"iconfont icon-pause"}):r("i",{staticClass:"iconfont icon-play"})]),r("i",{staticClass:"pointer iconfont icon-next"})]),r("div",{ref:"music",staticClass:"music-music",style:{width:t.outerWidth+"px"}},[r("div",{staticClass:"music-bar-info"},[t._v(" "+t._s(t.musicInfo.name)+" "),r("span",[t._v("-"+t._s(t.musicInfo.ar[0].name))])]),r("div",{staticClass:"music-bar-time"},[t._v(" "+t._s(t.time(t.musicInfo.duration))+" ")]),r("div",{staticClass:"music-progress"},[r("div",{staticClass:"progress-bar"}),r("div",{staticClass:"progress-outer"}),r("div",{staticClass:"progress-inner",style:{width:t.progress+"px"}},[r("div",{staticClass:"progress-dot"})])])]),r("i",{staticClass:"iconfont mode",class:t.playType,on:{click:t.handlePlayType}}),r("router-link",{staticClass:"iconfont icon-comment mode",attrs:{tag:"i",to:"/music/comment/"+t.musicInfo.id}}),r("div",{staticClass:"music-bar-volume"},[r("div",{staticClass:"volume"},[r("i",{staticClass:"iconfont icon-volume"}),r("div",{staticClass:"volume-progress-wrapper"},[r("div",{staticClass:"mmProgress"},[r("div",{staticClass:"mmProgress-bar"}),r("div",{staticClass:"mmProgress-outer"}),r("div",{staticClass:"mmProgress-inner",style:{width:t.volume}},[r("div",{staticClass:"mmProgress-dot"})])])])])])],1)},ft=[],pt=(r("e25e"),{data:function(){return{isPlay:!1,outerWidth:0,progress:0,typeIndex:0}},computed:{volume:function(){return 100*this.$store.state.volume+"%"},musicInfo:function(){return this.$store.state.musicObj?this.$store.state.musicObj:{name:"欢迎使用音乐播放器",ar:{0:{name:"Player"}},duration:null}},playType:function(){return this.$store.state.currentType}},methods:{handlePlayType:function(){this.typeIndex=++this.typeIndex%4;this.$store.commit("filterPlayType",this.typeIndex)},time:function(t){if(!t)return"";var e=parseInt(t/1e3/60),r=parseInt(t/1e3-60*e);e=e<10?"0"+e:e+"",r=r<10?"0"+r:r+"";var n=this.musicInfo.currentTime[0]+"/"+e+":"+r;return n}},mounted:function(){var t=this,e=this.$refs.music;this.outerWidth=e.offsetWidth,window.addEventListener("resize",(function(){t.outerWidth=e.offsetWidth}))},beforeUpdate:function(){},updated:function(){}}),mt=pt,ht=(r("3cab"),Object(p["a"])(mt,dt,ft,!1,null,null,null)),vt=ht.exports,yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"progress",staticClass:"progress",on:{click:t.changeProgress}},[r("div",{ref:"progress_bar",staticClass:"progress_bar"},[r("div",{ref:"progressLoad",staticClass:"progressLoad"}),r("div",{ref:"buffered",staticClass:"buffered"}),r("i",{ref:"i",on:{click:t.barClick,mousedown:t.barDown,mouseup:t.handleUp}})])])},gt=[];function bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var jt={props:{percent:{type:[Number],default:0},percentProgress:{type:[Number],default:0}},data:function(){return{move:{status:!1,startX:0,left:0}}},computed:Ot({},Object(g["e"])(["audioEle","playing"])),methods:{barClick:function(t){t.stopPropagation()},barDown:function(){this.audioEle.src?(this.audioEle.pause(),document.addEventListener("mousemove",this.barMove),document.addEventListener("mouseup",this.barUp)):console.log("没有播放音乐")},barUp:function(){document.removeEventListener("mousemove",this.barMove);var t=this.$refs.progressLoad.offsetWidth,e=t/this.$refs.progress_bar.clientWidth*this.audioEle.duration;Math.floor(e)!==Math.floor(this.audioEle.duration)?(this.setAudioPlayTime(e),this.audioEle.play()):this.$emit("next")},barMove:function(t){var e=t.clientX-this.$refs.progress.offsetLeft-180-25;e<0&&(e=0),e>this.$refs.progress.clientWidth&&(e=this.$refs.progress.clientWidth),this.moveSlide(e)},moveSlide:function(t){this.$refs.i.style.left=t+"px",this.$refs.progressLoad.style.width=t+"px"},changeProgress:function(t){if(this.audioEle.src){var e=t.clientX-this.$refs.progress.offsetLeft-180-25;this.moveSlide(e);var r=this.$refs.progressLoad.offsetWidth,n=r/this.$refs.progress_bar.clientWidth*this.audioEle.duration;this.setAudioPlayTime(n)}else console.log("没有播放音乐")},setAudioPlayTime:function(t){this.audioEle.currentTime=t.toFixed(3)},handleUp:function(){console.log("i is mouseUp")}},mounted:function(){var t=this;this.audioEle.addEventListener("progress",(function(){function e(){var r;t.audioEle.buffered.length&&(r=100*t.audioEle.buffered.end(0)/t.audioEle.duration,t.$refs.buffered.style.width=r+"%"),100!=r&&setTimeout(e,100)}e()})),this.audioEle.addEventListener("timeupdate",(function(){var e=t.audioEle.duration,r=t.audioEle.currentTime,n=r/e*t.$refs.progress.clientWidth;t.moveSlide(n)}))}},Pt=jt,_t=(r("8637"),Object(p["a"])(Pt,yt,gt,!1,null,null,null)),Ct=_t.exports,Et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"volume",staticClass:"volume"},[r("icon",{staticClass:"pointer volume-icon",attrs:{type:t.getVolumeIconType(),size:30},on:{click:t.handleToggleVolume}}),r("div",{ref:"progress",staticClass:"volume-progress-wrapper",on:{click:t.changeProgress}},[r("div",{ref:"progress_bar",staticClass:"progress_bar"},[r("div",{ref:"progressLoad",staticClass:"progressLoad"}),r("i",{ref:"i",on:{click:t.barClick,mousedown:t.barDown,mouseup:t.handleUp}})])])],1)},kt=[];function wt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Mt={data:function(){return{isMute:!1}},props:{volume:{type:Number,required:!0}},computed:xt({},Object(g["e"])(["audioEle"]),{volumePropgress:function(){return this.volume}}),methods:{getVolumeIconType:function(){return this.isMute?"volume-off":"volume"},handleToggleVolume:function(){this.isMute?this.initVolume():(this.setAudioVolume(0),this.moveSlide(0)),this.isMute=!this.isMute},handleVolumeChange:function(){},barClick:function(t){t.stopPropagation()},barDown:function(){this.audioEle.src?(document.addEventListener("mousemove",this.barMove),document.addEventListener("mouseup",this.barUp)):console.log("没有播放音乐")},barMove:function(t){var e=t.clientX-this.$refs.progress.offsetLeft;e<0&&(e=0),e>this.$refs.progress.clientWidth&&(e=this.$refs.progress.clientWidth);var r=this.$refs.progressLoad.offsetWidth;this.isMute=0==e;var n=r/this.$refs.progress_bar.clientWidth*1;this.setAudioVolume(n),this.moveSlide(e)},barUp:function(){document.removeEventListener("mousemove",this.barMove)},handleUp:function(){},changeProgress:function(t){if(this.audioEle.src){var e=t.clientX-this.$refs.progress.offsetLeft;0==e&&(this.isMute=!0),this.moveSlide(e);var r=this.$refs.progressLoad.offsetWidth,n=r/this.$refs.progress_bar.clientWidth*1;this.setAudioVolume(n)}else console.log("没有播放音乐")},setAudioVolume:function(t){this.audioEle.volume=t},moveSlide:function(t){this.$refs.i.style.left=t+"px",this.$refs.progressLoad.style.width=t+"px"},initVolume:function(){this.moveSlide(this.$refs.progress_bar.offsetWidth*this.volume),this.setAudioVolume(this.volume)}},mounted:function(){this.initVolume()}},Tt=Mt,Lt=(r("2e88"),Object(p["a"])(Tt,Et,kt,!1,null,null,null)),It=Lt.exports,St=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"music-btn"},[r("router-link",{attrs:{tag:"span",to:"/music/playlist"}},[t._v("正在播放")]),r("router-link",{attrs:{tag:"span",to:"/music/toplist"}},[t._v("推荐")]),r("router-link",{attrs:{tag:"span",to:"/music/search"}},[t._v("搜索")]),r("router-link",{attrs:{tag:"span",to:"/music/userlist"}},[t._v("我的歌单")]),r("router-link",{attrs:{tag:"span",to:"/music/historylist"}},[t._v("我听过的")])],1)},$t=[],Dt={},At=Dt,Ut=(r("4acf"),Object(p["a"])(At,St,$t,!1,null,null,null)),Nt=Ut.exports,Rt={initAudio:function(t){var e=t.audioEle;e.onprogress=function(){try{if(e.buffered.length>0){var r=t.currentMusic.duration,n=0;e.buffered.end(0),n=e.buffered.end(0)>r?r:e.buffered.end(0),t.currentProgress=n/r}}catch(i){}},e.onplay=function(){var e;clearTimeout(e),e=setTimeout((function(){t.musicReady=!0}),100)},e.ontimeupdate=function(){t.currentTime=e.currentTime},e.onended=function(){t.mode===D["d"].loop?t.loop():t.next()},e.onerror=function(){console.log("当前音乐不可播放, 已自动播放下一首"),t.next()},e.onstalled=function(){var r;e.load(),t.setPlaying(!1),clearTimeout(r),r=setTimeout((function(){t.setPlaying(!0)}),10)},e.oncanplay=function(){0!==t.historyList.length&&t.currentMusic.id===t.historyList[0].id||t.setHistory(t.currentMusic)}}},Wt=Rt;function zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Bt={components:{MusicRight:rt,MusicBar:vt,Lyric:lt,MProgress:Ct,volume:It,MusicBtn:Nt},filters:{format:$},data:function(){var t=J();return{musicReady:!1,currentTime:0,currentProgress:0,lyric:[],noLyric:!1,lyricIndex:0,isMute:!1,volume:t,picUrl:"".concat(r("2262")),playBg:D["a"]}},computed:Vt({percentMusic:function(){var t=this.currentMusic.duration;return this.currentTime&&t?this.currentTime/t:0}},Object(g["c"])(["audioEle","mode","playing","playlist","orderList","currentIndex","currentMusic","historyList"])),watch:{currentMusic:{handler:function(t,e){var r=this;t.id?t.id!==e.id&&(t.id&&t.image&&this.$nextTick((function(){var e=t.image;"object"==Object(x["a"])(t.image)&&(console.log(t),t.image.then((function(t){e=t}))),setTimeout((function(){r.picUrl=e,r.$refs.playBg.style.backgroundImage="url(".concat(e,")")}),500)})),this.audioEle.src=t.url,this.lyricIndex=this.currentTime=this.currentProgress=0,this.audioEle.play(),this.$nextTick((function(){r._getLyric(t.id)}))):this.lyric=[]},immediate:!0,deep:!0},playing:function(t){var e=this,r=this.audioEle;this.$nextTick((function(){t?r.play():r.pause(),e.musicReady=!0}))},currentTime:function(t){if(!this.noLyric){for(var e=0,r=0;r<this.lyric.length;r++)t>this.lyric[r].time&&(e=r);this.lyricIndex=e}}},methods:Vt({initKeyDown:function(){var t=this;document.onkeydown=function(e){switch(e.ctrlKey&&e.keyCode){case 32:t.play();break;case 37:t.prev();break;case 38:var r=Number((t.volume+=.1).toFiexd(1));r>1&&(r=1);break;case 39:t.next();break;case 40:var n=Number((t.volume-=.1).toFixed(1));n<0&&(n=0),t.volumeChange(n);break;case 79:t.modeChange();break}}},prev:function(){if(this.musicReady)if(1===this.playlist.length)this.loop();else{var t=this.currentIndex-1;t<0&&(t=this.playlist.length-1),this.setCurrentIndex(t),!this.playing&&this.musicReady&&this.setPlaying(!0),this.musicReady=!1}},play:function(){this.musicReady&&this.setPlaying(!this.playing)},next:function(){if(this.musicReady)if(this.playlist.length-1===this.currentIndex&&this.mode===D["d"].order&&(this.setCurrentIndex(-1),this.setPlaying(!1)),1===this.playlist.length)this.loop();else{var t=this.currentIndex+1;t===this.playlist.length&&(t=0),!this.playing&&this.musicReady&&this.setPlaying(!0),this.setCurrentIndex(t),this.musicReady=!1}},loop:function(){this.audioEle.currentTime=0,this.audioEle.play(),this.setPlaying(!0),this.lyric.length>0&&(this.lyricIndex=0)},progressMusic:function(t){this.audioEle.currentTime=this.currentTime.duration*t},getModeIconType:function(){var t;return(t={},Object(a["a"])(t,D["d"].listLoop,"loop"),Object(a["a"])(t,D["d"].order,"sequence"),Object(a["a"])(t,D["d"].random,"random"),Object(a["a"])(t,D["d"].loop,"loop-one"),t)[this.mode]},volumeChange:function(t){},openComment:function(){if(!this.currentMusic.id)return console.log("没有播放音乐"),!1;var t=this.$route.path;-1==t.indexOf("/music/comment")&&this.$router.push("/music/comment/".concat(this.currentMusic.id))},modeChange:function(){var t=(this.mode+1)%4;if(this.setPlayMode(t),t!=D["d"].loop){var e=[];switch(t){case D["d"].listLoop:case D["d"].order:e=this.orderList;break;case D["d"].random:e=T(this.orderList);break}this.resetCurrentIndex(e),this.setPlaylist(e)}},resetCurrentIndex:function(t){var e=this,r=t.findIndex((function(t){return t.id===e.currentMusic.id}));this.setCurrentIndex(r)},getModeIconTitle:function(){var t,e="Ctrl + O";return(t={},Object(a["a"])(t,D["d"].listLoop,"列表循环 ".concat(e)),Object(a["a"])(t,D["d"].order,"顺序播放 ".concat(e)),Object(a["a"])(t,D["d"].random,"随机播放 ".concat(e)),Object(a["a"])(t,D["d"].loop,"单曲循环 ".concat(e)),t)[this.mode]},_getLyric:function(t){var e=this;y["a"].getLyric(t).then((function(t){200==t.status&&(t.data.nolyric?e.nolyric=!0:(e.nolyric=!1,e.lyric=S(t.data.lrc.lyric)),e.audioEle.play())}),(function(t){console.log(t)}))},del:function(t){console.log(t)}},Object(g["d"])({setPlaying:"SET_PLAYING",setPlaylist:"SET_PLAYLIST",setCurrentIndex:"SET_CURRENTINDEX"}),{},Object(g["b"])(["setHistory","setPlayMode"])),mounted:function(){var t=this;this.$nextTick((function(){Wt.initAudio(t),t.initKeyDown(),t.volumeChange(t.volume)}))},updated:function(){}},Ht=Bt,Xt=(r("9949"),Object(p["a"])(Ht,k,w,!1,null,null,null)),Yt=Xt.exports;s["default"].use(E["a"]);var qt=[{path:"/",redirect:"/music"},{path:"/music",name:"music",component:Yt,redirect:"music/playlist",children:[{path:"playlist",name:"playlist",component:function(){return r.e("chunk-2f9c4fa1").then(r.bind(null,"243c"))},meta:{keepAlive:!0}},{path:"toplist",component:function(){return r.e("chunk-1972d1e7").then(r.bind(null,"e54f"))},meta:{title:"排行榜",keepAlive:!0}},{path:"search",component:function(){return r.e("chunk-300c5f9a").then(r.bind(null,"1ef7"))},meta:{title:"搜索",keepAlive:!0}},{path:"userlist",component:function(){return r.e("chunk-b6e71724").then(r.bind(null,"1a47"))},meta:{title:"我的歌单",keepAlive:!0}},{path:"historylist",component:function(){return r.e("chunk-76814149").then(r.bind(null,"bca9"))},meta:{title:"我听过的"}},{path:"details/:id",component:function(){return r.e("chunk-06bfda36").then(r.bind(null,"e322"))}},{path:"comment/:id",component:function(){return r.e("chunk-629c5aab").then(r.bind(null,"842d"))},meta:{title:"评论"}}]}],Jt=new E["a"]({mode:"history",linkExactActiveClass:"active",base:"",routes:qt}),Kt=Jt,Ft={audioEle:null,mode:Number(X())||D["d"].listLoop,playing:!1,playlist:[],orderList:[],currentIndex:-1,historyList:W()||[]},Gt=Ft,Qt=function(t){return t.audioEle},Zt=function(t){return t.mode},te=function(t){return t.playing},ee=function(t){return t.playlist},re=function(t){return t.orderList},ne=function(t){return t.currentIndex},ie=function(t){return t.playlist[t.currentIndex]||{}},se=function(t){return t.historyList},oe=r("2909"),ce="SET_AUDIOELE",ae="SET_PLAYMODE",ue="SET_PLAYING",le="SET_PLAYLIST",de="SET_ORDERLIST",fe="SET_CURRENTINDEX",pe="SET_HISTORYLIST";function me(t,e){return t.findIndex((function(t){return t.id===e.id}))}function he(t,e){var r=t.commit,n=e.list;r(le,n),r(de,n)}var ve,ye=function(t,e){var r=t.commit,n=e.list,i=e.index;r(le,n),r(de,n),r(fe,i),r(ue,!0)},ge=function(t,e){var r=t.commit,n=t.state,i=Object(oe["a"])(n.playlist),s=me(i,e);s>-1?r(fe,s):(i.unshift(e),r(le,i),r(de,i),r(fe,0)),r(ue,!0)},be=function(t){var e=t.commit;e(ue,!1),e(fe,-1),e(le,[]),e(de,[])},Oe=function(t,e){var r=t.commit,n=t.state,i=e.list,s=e.index,o=n.currentIndex;(s<n.currentIndex||i.length===n.currentIndex)&&(o--,r(fe,o)),r(le,i),r(de,i),i.length?r(ue,!0):r(ue,!1)},je=function(t,e){var r=t.commit;r(pe,z(e))},Pe=function(t,e){var r=t.commit;r(pe,V(e))},_e=function(t){var e=t.commit;e(pe,B())},Ce=function(t,e){var r=t.commit;r(ae,Y(e))},Ee=(ve={},Object(a["a"])(ve,ce,(function(t,e){t.audioEle=e})),Object(a["a"])(ve,ae,(function(t,e){t.mode=e})),Object(a["a"])(ve,ue,(function(t,e){t.playing=e})),Object(a["a"])(ve,le,(function(t,e){t.playlist=e})),Object(a["a"])(ve,de,(function(t,e){t.orderList=e})),Object(a["a"])(ve,fe,(function(t,e){t.currentIndex=e})),Object(a["a"])(ve,pe,(function(t,e){t.historyList=e})),ve),ke=Ee;s["default"].use(g["a"]);var we=new g["a"].Store({state:Gt,getters:n,actions:i,mutations:ke}),xe=(r("fa6d"),r("77a0")),Me=r.n(xe),Te=r("0a86");s["default"].config.productionTip=!1,s["default"].use(Me.a),s["default"].component("icon",Te["a"]),s["default"].component("vue-scroll",Me.a);new s["default"]({router:Kt,store:we,render:function(t){return t(C)}}).$mount("#app")},6198:function(t,e,r){},"63a0":function(t,e,r){},"771b":function(t,e,r){},"7c55":function(t,e,r){"use strict";var n=r("2395"),i=r.n(n);i.a},8081:function(t,e,r){"use strict";var n=r("f860"),i=r.n(n);i.a},8637:function(t,e,r){"use strict";var n=r("771b"),i=r.n(n);i.a},9949:function(t,e,r){"use strict";var n=r("0f4c"),i=r.n(n);i.a},db49:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return c}));var n=30,i=["https://netease-music.fe-mm.com/img/bg-1.cf743e29.jpg","https://img95.699pic.com/photo/40008/1514.jpg_wh860.jpg"],s=i[Math.floor(Math.random()*i.length)],o=.2,c={listLoop:0,order:1,loop:2,random:3}},eb4d:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return u}));r("4160"),r("a15b"),r("b0c0"),r("159b");var n=r("d4ec");function i(t){var e=[];return t.forEach((function(t){e.push(t.name)})),e.join("/")}var s=function t(e){var r=e.id,i=e.name,s=e.singer,o=e.album,c=e.image,a=e.duration,u=e.url;Object(n["a"])(this,t),this.id=r,this.name=i,this.singer=s,this.album=o,this.image=c,this.duration=a,this.url=u};function o(t){return new s({id:t.id,name:t.name,singer:t.artists.length>0&&i(t.artists),album:t.album.name,image:t.album.picUrl||"https://p1.music.126.net/DESxmcxT42-KrVQvi0dEMQ==/".concat(t.album.picId,".jpg?param=300y300"),duration:t.duration/1e3,url:"https://music.163.com/song/media/outer/url?id=".concat(t.id,".mp3")})}function c(t){return new s({id:t.id,name:t.name,singer:t.ar.length>0&&i(t.ar),album:t.al.name,image:t.al.picUrl,duration:t.dt/1e3,url:"https://music.163.com/song/media/outer/url?id=".concat(t.id,".mp3")})}var a=function(t){var e=[];return t.forEach((function(t){var r=t;r.id&&e.push(o(r))})),e},u=function(t){var e=[];return t.forEach((function(t){var r=t;r.id&&e.push(c(r))})),e};e["b"]=a},ebee:function(t,e,r){},f2fb:function(t,e,r){},f860:function(t,e,r){}});
//# sourceMappingURL=app.6956bd94.js.map