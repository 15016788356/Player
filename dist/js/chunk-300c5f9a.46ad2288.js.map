{"version":3,"sources":["webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./src/views/search/search.vue?b63e","webpack:///src/views/search/search.vue","webpack:///./src/views/search/search.vue?10af","webpack:///./src/views/search/search.vue","webpack:///./src/components/music-list/Music-list.vue?e599","webpack:///./node_modules/core-js/modules/es.string.search.js","webpack:///./src/views/search/search.vue?4e23","webpack:///./src/components/music-list/Music-list.vue?3580","webpack:///src/components/music-list/Music-list.vue","webpack:///./src/components/music-list/Music-list.vue?416f","webpack:///./src/components/music-list/Music-list.vue"],"names":["module","exports","Object","is","x","y","render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","Artists","slice","item","index","key","on","$event","clickHot","first","_v","_s","directives","name","rawName","value","expression","modifiers","attrs","domProps","type","indexOf","_k","keyCode","onEnter","target","composing","searchValue","trim","$forceUpdate","list","lockUp","scrollTo","selectItem","pullUpLoad","staticRenderFns","component","fixRegExpWellKnownSymbolLogic","anObject","requireObjectCoercible","sameValue","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","O","searcher","undefined","call","RegExp","String","res","done","rx","S","previousLastIndex","lastIndex","result","length","listType","ref","style","height","ops","handleScroll","getPlayIconType","stopPropagation","singer","refInFor","time","duration","delectItem","album","_e"],"mappings":"mGAEAA,EAAOC,QAAUC,OAAOC,IAAM,SAAYC,EAAGC,GAE3C,OAAOD,IAAMC,EAAU,IAAND,GAAW,EAAIA,IAAM,EAAIC,EAAID,GAAKA,GAAKC,GAAKA,I,2CCJ/D,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACN,EAAIO,GAAIP,EAAIQ,QAAQC,MAAM,EAAG,IAAI,SAASC,EAAKC,GAAO,OAAOP,EAAG,OAAO,CAACQ,IAAID,EAAME,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAIe,SAASL,EAAKM,UAAU,CAAChB,EAAIiB,GAAG,IAAIjB,EAAIkB,GAAGR,EAAKM,OAAO,UAASZ,EAAG,QAAQ,CAACe,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,eAAeC,MAAOtB,EAAe,YAAEuB,WAAW,cAAcC,UAAU,CAAC,MAAO,KAAQlB,YAAY,eAAemB,MAAM,CAAC,KAAO,OAAO,YAAc,SAASC,SAAS,CAAC,MAAS1B,EAAe,aAAGa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOa,KAAKC,QAAQ,QAAQ5B,EAAI6B,GAAGf,EAAOgB,QAAQ,QAAQ,GAAGhB,EAAOF,IAAI,SAAkB,KAAcZ,EAAI+B,QAAQjB,IAAS,MAAQ,SAASA,GAAWA,EAAOkB,OAAOC,YAAqBjC,EAAIkC,YAAYpB,EAAOkB,OAAOV,MAAMa,SAAQ,KAAO,SAASrB,GAAQ,OAAOd,EAAIoC,oBAAoB,GAAGhC,EAAG,YAAY,CAACqB,MAAM,CAAC,KAAOzB,EAAIqC,KAAK,SAAW,EAAE,OAAS,GAAG,OAASrC,EAAIsC,OAAO,SAAWtC,EAAIuC,UAAU1B,GAAG,CAAC,OAASb,EAAIwC,WAAW,WAAaxC,EAAIyC,eAAe,IAC7jCC,EAAkB,G,owBCsBtB,OACE,WAAF,CACI,UAAJ,QAEE,KAJF,WAKI,MAAJ,CACM,QAAN,EACM,YAAN,GACM,KAAN,GACM,KAAN,EACM,QAAN,GACM,UAAN,IAGE,MAAF,GAWE,QAzBF,WAyBI,IAAJ,OACI,EAAJ,mCACA,oBACQ,EAAR,+BAEA,YAAM,QAAN,oBAEE,QAAF,GACI,QADJ,WACM,IAAN,OACA,oDAIM,KAAN,OACA,qBACQ,KAAR,aAEM,EAAN,0DACA,oBACU,EAAV,6CAEA,YAAQ,QAAR,mBAXQ,QAAR,iBAgBI,WAnBJ,WAmBM,IAAN,OACA,oDAIM,KAAN,QACM,EAAN,0DACQ,GAAR,eACU,IAAV,oBAGY,OAFA,EAAZ,UACY,QAAZ,eACA,KAEU,EAAV,+FAGA,YAAQ,QAAR,mBAdQ,QAAR,iBAgBI,WArCJ,SAqCA,GACM,IAAN,6BACM,EAAN,QACM,KAAN,kBAEI,gBA1CJ,SA0CA,GACM,OAAN,2CACQ,GAAR,kBACU,OAAV,8BAII,SAjDJ,SAiDA,GACM,KAAN,cACM,KAAN,YAEA,gBACI,WAAJ,gBAtDA,GAwDA,mCAEE,SAAF,KACA,6CClH+V,I,wBCQ3VC,EAAY,eACd,EACA5C,EACA2C,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,6CCnBf,yBAAgkB,EAAG,G,oCCCnkB,IAAIC,EAAgC,EAAQ,QACxCC,EAAW,EAAQ,QACnBC,EAAyB,EAAQ,QACjCC,EAAY,EAAQ,QACpBC,EAAa,EAAQ,QAGzBJ,EAA8B,SAAU,GAAG,SAAUK,EAAQC,EAAcC,GACzE,MAAO,CAGL,SAAgBC,GACd,IAAIC,EAAIP,EAAuB7C,MAC3BqD,OAAqBC,GAAVH,OAAsBG,EAAYH,EAAOH,GACxD,YAAoBM,IAAbD,EAAyBA,EAASE,KAAKJ,EAAQC,GAAK,IAAII,OAAOL,GAAQH,GAAQS,OAAOL,KAI/F,SAAUD,GACR,IAAIO,EAAMR,EAAgBD,EAAcE,EAAQnD,MAChD,GAAI0D,EAAIC,KAAM,OAAOD,EAAIrC,MAEzB,IAAIuC,EAAKhB,EAASO,GACdU,EAAIJ,OAAOzD,MAEX8D,EAAoBF,EAAGG,UACtBjB,EAAUgB,EAAmB,KAAIF,EAAGG,UAAY,GACrD,IAAIC,EAASjB,EAAWa,EAAIC,GAE5B,OADKf,EAAUc,EAAGG,UAAWD,KAAoBF,EAAGG,UAAYD,GAC9C,OAAXE,GAAmB,EAAIA,EAAOtD,Y,kCC9B3C,yBAAoiB,EAAG,G,gFCAviB,IAAIZ,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAA4B,IAApBF,EAAIqC,KAAK6B,OAAc9D,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,OAAO,CAACE,YAAY,aAAa,CAACN,EAAIiB,GAAG,QAAQb,EAAG,OAAO,CAACE,YAAY,eAAe,CAACN,EAAIiB,GAAG,QAA0B,IAAjBjB,EAAImE,SAAgB/D,EAAG,OAAO,CAACE,YAAY,aAAa,CAACN,EAAIiB,GAAG,QAAQb,EAAG,OAAO,CAACE,YAAY,cAAc,CAACN,EAAIiB,GAAG,UAAUb,EAAG,aAAa,CAACgE,IAAI,KAAKC,MAAOrE,EAAIsE,SAAU7C,MAAM,CAAC,aAAe,GAAG,IAAMzB,EAAIuE,KAAK1D,GAAG,CAAC,gBAAgBb,EAAIwE,eAAe,CAACpE,EAAG,MAAM,CAACE,YAAY,gBAAgBN,EAAIO,GAAIP,EAAQ,MAAE,SAASU,EAAKC,GAAO,OAAOP,EAAG,MAAM,CAACQ,IAAID,EAAML,YAAY,aAAa,CAACF,EAAG,OAAO,CAACE,YAAY,YAAY,CAACN,EAAIiB,GAAGjB,EAAIkB,GAAGP,EAAQ,MAAMP,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,OAAO,CAACJ,EAAIiB,GAAGjB,EAAIkB,GAAGR,EAAKU,SAAShB,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,OAAO,CAACE,YAAY,QAAQmB,MAAM,CAAC,KAAOzB,EAAIyE,gBAAgB/D,GAAM,KAAO,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAiC,OAAzBA,EAAO4D,kBAAyB1E,EAAIwC,WAAW9B,EAAMC,EAAOG,QAAa,KAAKV,EAAG,OAAO,CAACE,YAAY,eAAe,CAACN,EAAIiB,GAAG,IAAIjB,EAAIkB,GAAGR,EAAKiE,QAAQ,OAAyB,IAAjB3E,EAAImE,SAAgB/D,EAAG,OAAO,CAACE,YAAY,aAAa,CAACF,EAAG,OAAO,CAACgE,IAAI,OAAOQ,UAAS,GAAM,CAAC5E,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAI6E,KAAKnE,EAAKoE,cAAc1E,EAAG,IAAI,CAACE,YAAY,kCAAkCO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAI+E,WAAWpE,SAAaP,EAAG,OAAO,CAACE,YAAY,cAAc,CAACN,EAAIiB,GAAG,IAAIjB,EAAIkB,GAAGR,EAAKsE,OAAO,YAAW,MAAM,GAAGhF,EAAIiF,MACx8CvC,EAAkB,G,gsBCwCtB,OACE,KADF,WAEI,MAAJ,CACM,IAAN,CACQ,IAAR,CACU,UAAV,EACU,WAAV,qBACU,QAAV,GACU,SAAV,GAEQ,KAAR,CACU,QAAV,GACU,WAAV,mBAKE,SAAF,KACA,4CAGE,MAAF,CACI,OAAJ,CACM,KAAN,QACM,SAAN,GAGI,KAAJ,CACM,KAAN,MACM,QAAN,WAAQ,MAAR,KAEI,OAAJ,CACM,KAAN,QACM,SAAN,GAEI,SAAJ,CACM,KAAN,OACM,QAAN,GAEI,OAAJ,CACM,KAAN,OACM,QAAN,GAEI,SAAJ,CACM,KAAN,QACM,SAAN,IAGE,MAAF,CACI,KADJ,SACA,GACA,IAEQ,KAAR,sBAII,OARJ,SAQA,GACA,IAEQ,KAAR,sBAGI,SAdJ,SAcA,GACA,GACQ,KAAR,qBACA,CACU,EAAV,MAME,QAAF,GAII,aAJJ,SAIA,OACA,6BAEQ,KAAR,oBACQ,KAAR,oBACQ,QAAR,mBAUI,OAnBJ,WAoBM,MAAN,yDAEI,KAtBJ,SAsBA,GACM,IAAN,iBACA,mBACM,EAAN,gBACM,EAAN,gBACM,IAAN,UACM,OAAN,GAEI,WA9BJ,SA8BA,OACA,kDACQ,KAAR,0BAGM,KAAN,qBAEI,WArCJ,SAqCA,GACM,KAAN,gBAEI,gBAxCJ,YAwCM,IAAN,OAGA,EAEA,KAFA,QACA,EACA,KADA,gBAEM,OAAN,oCAEA,gBACI,WAAJ,iBAGE,QA5HF,cCzCmW,I,wBCQ/VC,EAAY,eACd,EACA5C,EACA2C,GACA,EACA,KACA,WACA,MAIa,OAAAC,E","file":"js/chunk-300c5f9a.46ad2288.js","sourcesContent":["// `SameValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-samevalue\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('div',{staticClass:\"search-head\"},[_vm._l((_vm.Artists.slice(0, 5)),function(item,index){return _c('span',{key:index,on:{\"click\":function($event){return _vm.clickHot(item.first)}}},[_vm._v(\" \"+_vm._s(item.first)+\" \")])}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.searchValue),expression:\"searchValue\",modifiers:{\"trim\":true}}],staticClass:\"search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"音乐/歌手\"},domProps:{\"value\":(_vm.searchValue)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onEnter($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.searchValue=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})],2),_c('MusicList',{attrs:{\"list\":_vm.list,\"listType\":2,\"Height\":60,\"lockUp\":_vm.lockUp,\"scrollTo\":_vm.scrollTo},on:{\"select\":_vm.selectItem,\"pullUpLoad\":_vm.pullUpLoad}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"search\">\r\n        <div class=\"search-head\">\r\n            <span v-for=\"(item, index) in Artists.slice(0, 5)\" :key=\"index\" @click=\"clickHot(item.first)\">\r\n                {{item.first}}\r\n            </span>\r\n            <input type=\"text\" v-model.trim=\"searchValue\" class=\"search-input\" placeholder=\"音乐/歌手\" @keyup.enter=\"onEnter\">\r\n        </div>\r\n        <MusicList\r\n            :list=\"list\"\r\n            :listType=\"2\"\r\n            v-on:select=\"selectItem\"\r\n            :Height=\"60\"\r\n            :lockUp=\"lockUp\"\r\n            :scrollTo=\"scrollTo\"\r\n            @pullUpLoad=\"pullUpLoad\"></MusicList>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapMutations, mapActions } from 'vuex';\r\nimport MusicList from '../../components/music-list/Music-list.vue';\r\nimport api from '../../api/index.js';\r\nimport formatSongs from '../../utils/song.js';\r\nexport default {\r\n    components: {\r\n        MusicList\r\n    },\r\n    data() {\r\n        return {\r\n            lockUp: true,//是否上拉加载\r\n            searchValue: '',//热搜关键词\r\n            list: [],//搜索数组\r\n            page: 0,//分页\r\n            Artists: [],//热搜数组\r\n            scrollTo: false\r\n        }\r\n    },\r\n    watch: {\r\n        // list(newValue, oldList){\r\n        //     if (newValue.length !== oldList.length) {\r\n        //         this.lockUp = false;\r\n        //     } else if (\r\n        //         newList[newList.length - 1].id !== oldList[oldList.length - 1].id\r\n        //     ) {\r\n        //         this.lockUp = false\r\n        //     }\r\n        // }\r\n    },\r\n    created() {\r\n        api.searchHot().then((res) => {\r\n            if (res.data.code === 200) {\r\n                this.Artists = res.data.result.hots;\r\n            }  \r\n        }, (err) => { console.log('search' + err) })\r\n    },\r\n    methods: {\r\n        onEnter(){\r\n            if (this.searchValue.replace(/(^\\s+)|(\\s+$)/g, '') === '') {\r\n                console.log('搜索内容不能为空')\r\n                return;\r\n            }\r\n            this.page = 0;\r\n            if (this.list.length > 0) {\r\n                this.scrollTo = true;\r\n            }\r\n            api.search(this.searchValue, this.page).then(res => {\r\n                if (res.data.code === 200) {\r\n                    this.list = formatSongs(res.data.result.songs);\r\n                }\r\n            }, err => { console.log('seach' + err) })\r\n        },\r\n        /**\r\n         * 滚动加载事件\r\n         */\r\n        pullUpLoad(){\r\n            if (this.searchValue.replace(/(^\\s+)|(\\s+$)/g, '') === '') {\r\n                console.log('搜索内容不能为空')\r\n                return;\r\n            }\r\n            this.page += 1;\r\n            api.search(this.searchValue, this.page).then(res => {\r\n                if (res.status == 200) {\r\n                    if (!res.data.result.songs) {\r\n                        this.lockUp = false;\r\n                        console.log('没有更多歌曲了')\r\n                        return null;\r\n                    }\r\n                    this.list = [...this.list, ...formatSongs(res.data.result.songs)];\r\n                    // console.log(this.list);\r\n                }\r\n            }, err => { console.log('seach' + err) })\r\n        },\r\n        selectItem(music){\r\n            let image = this._getMusicDetail(music.id);\r\n            music.image = image;\r\n            this.selectAddPlay(music);\r\n        },\r\n        _getMusicDetail(id){\r\n            return api.getMusicDetail(id).then(res => {\r\n                if (res.data.code === 200) {\r\n                    return res.data.songs[0].al.picUrl\r\n                }\r\n            })\r\n        },\r\n        clickHot(name){\r\n            this.searchValue = name;\r\n            this.onEnter();\r\n        },\r\n        ...mapMutations({\r\n            setPlaying: 'SET_PLAYING',\r\n        }),\r\n        ...mapActions(['selectAddPlay'])\r\n    },\r\n    computed: {\r\n        ...mapGetters(['playing', 'currentMusic'])\r\n    },\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n    .search {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    .search-head {\r\n        display: flex;\r\n        height: 40px;\r\n        padding: 10px 15px;\r\n        overflow: hidden;\r\n        background: rgba(0,0,0,.2);\r\n        span {\r\n        line-height: 40px;\r\n        margin-right: 15px;\r\n        cursor: pointer;\r\n        &:hover {\r\n            color: #fff;\r\n        }\r\n        @media (max-width: 640px) {\r\n            & {\r\n            display: none;\r\n            }\r\n      }\r\n    }\r\n    .search-input {\r\n      flex: 1;\r\n      height: 40px;\r\n      box-sizing: border-box;\r\n      padding: 0 15px;\r\n      border: 1px solid hsla(0,0%,100%,.6);\r\n      outline: 0;\r\n      background: transparent;\r\n      color: #fff;\r\n      font-size: 14px;\r\n      box-shadow: 0 0 1px 0 #fff inset;\r\n      &::placeholder {\r\n        color: hsla(0,0%,100%,.6);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=0eabd9a7&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Music-list.vue?vue&type=style&index=0&id=e3c5f194&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Music-list.vue?vue&type=style&index=0&id=e3c5f194&lang=less&scoped=true&\"","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', 1, function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : regexp[SEARCH];\n      return searcher !== undefined ? searcher.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative(nativeSearch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.list.length !== 0)?_c('div',{staticClass:\"musicList\"},[_c('div',{staticClass:\"list-item list-header\"},[_c('span',{staticClass:\"list-name\"},[_vm._v(\"歌曲\")]),_c('span',{staticClass:\"list-singer\"},[_vm._v(\"歌手\")]),(_vm.listType === 1)?_c('span',{staticClass:\"list-time\"},[_vm._v(\"时长\")]):_c('span',{staticClass:\"list-album\"},[_vm._v(\"专辑\")])]),_c('vue-scroll',{ref:\"vs\",style:(_vm.height()),attrs:{\"detectResize\":\"\",\"ops\":_vm.ops},on:{\"handle-scroll\":_vm.handleScroll}},[_c('div',{staticClass:\"list-content\"},_vm._l((_vm.list),function(item,index){return _c('div',{key:index,staticClass:\"list-item\"},[_c('span',{staticClass:\"list-num\"},[_vm._v(_vm._s(index + 1))]),_c('div',{staticClass:\"list-name\"},[_c('span',[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"list-menu\"},[_c('icon',{staticClass:\"hover\",attrs:{\"type\":_vm.getPlayIconType(item),\"size\":40},on:{\"click\":function($event){$event.stopPropagation();return _vm.selectItem(item, index, $event)}}})],1)]),_c('span',{staticClass:\"list-singer\"},[_vm._v(\" \"+_vm._s(item.singer)+\" \")]),(_vm.listType === 1)?_c('span',{staticClass:\"list-time\"},[_c('span',{ref:\"time\",refInFor:true},[_vm._v(_vm._s(_vm.time(item.duration)))]),_c('i',{staticClass:\"iconfont icon-delete-mini hover\",on:{\"click\":function($event){return _vm.delectItem(index)}}})]):_c('span',{staticClass:\"list-album\"},[_vm._v(\" \"+_vm._s(item.album)+\" \")])])}),0)])],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"musicList\"  v-if=\"list.length !== 0\" >\r\n        <div class=\"list-item list-header\">\r\n            <span class=\"list-name\">歌曲</span>\r\n            <span class=\"list-singer\">歌手</span>\r\n            <span class=\"list-time\" v-if=\"listType === 1\">时长</span>\r\n            <span class=\"list-album\" v-else>专辑</span>\r\n        </div>\r\n        <vue-scroll detectResize :ops=\"ops\" ref=\"vs\" @handle-scroll=\"handleScroll\" :style=\"height()\">\r\n        <div class=\"list-content\">\r\n            <div class=\"list-item\" v-for=\"(item, index) in list\" :key=\"index\">\r\n                <span class=\"list-num\">{{index + 1}}</span>\r\n                <div class=\"list-name\">\r\n                    <span >{{item.name}}</span>\r\n                    <div class=\"list-menu\">\r\n                        <icon \r\n                            class=\"hover\"\r\n                            :type=\"getPlayIconType(item)\"\r\n                            :size=\"40\"\r\n                            @click.stop=\"selectItem(item, index, $event)\"\r\n                        />\r\n                    </div>\r\n                </div> \r\n                <span class=\"list-singer\">\r\n                    {{item.singer}}\r\n                </span>\r\n                <span class=\"list-time\" v-if=\"listType === 1\">\r\n                    <span ref=\"time\">{{time(item.duration)}}</span>\r\n                    <i class=\"iconfont icon-delete-mini hover\" @click=\"delectItem(index)\"></i>\r\n                </span>\r\n                <span class=\"list-album\" v-else>\r\n                    {{item.album}}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </vue-scroll>\r\n    </div>\r\n    \r\n</template>\r\n<script>\r\nimport { mapGetters, mapMutations } from 'vuex';\r\nexport default {\r\n    data() {\r\n        return {\r\n            ops: {//滚动条配置\r\n                bar: {\r\n                    keepShow: true,\r\n                    background: 'rgb(168, 172, 171)',\r\n                    minSize: 0.1,\r\n                    disable: false//是否禁用滚动条\r\n                },\r\n                rail: {\r\n                    opacity: 0.3,\r\n                    background: 'rgb(0, 0, 0)'\r\n                }\r\n            },\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['playing', 'currentMusic']),\r\n        \r\n    },\r\n    props: {\r\n        isShow: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        // 歌曲数据\r\n        list: {\r\n            type: Array,\r\n            default: () => []\r\n        },\r\n        lockUp: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        listType: {\r\n            type: Number,\r\n            default: 1\r\n        },\r\n        Height: {\r\n            type: Number,\r\n            default: 0\r\n        },\r\n        scrollTo: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    watch: {\r\n        list(newValue){\r\n            if (newValue) {\r\n                // this.ops.bar.disable = false;\r\n                this.ops.bar.keepShow = true;\r\n\r\n            }\r\n        },\r\n        lockUp(newValue){\r\n            if (!newValue) {\r\n                // this.ops.bar.disable = false;\r\n                this.ops.bar.keepShow = true;\r\n            }\r\n        },\r\n        scrollTo(newValue){\r\n            if (newValue) {\r\n                this.$refs['vs'].scrollTo(\r\n                    {\r\n                        y: 0\r\n                    },\r\n                )\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        /**\r\n         * 上拉加载事件\r\n         */\r\n        handleScroll(vertical, horizontal, nativeEvent){\r\n            if (this.lockUp && vertical.process > 0.95) {\r\n                // this.ops.bar.disable = true;\r\n                this.ops.bar.keepShow = false;\r\n                this.$emit('pullUpLoad');\r\n                console.log(vertical.scrollTop);\r\n                // vertical.process = 0.5;\r\n                // console.log();\r\n                // this.$refs['vs'].scrollTo(\r\n                //     {\r\n                //         y: vertical.scrollTop\r\n                //     },\r\n                // )\r\n            }\r\n        },\r\n        height(){\r\n            return `height: calc(100% - 50px - ${this.Height}px)`\r\n        },\r\n        time(num){\r\n            var Minute = parseInt(num / 60);\r\n            var Second = parseInt(num - Minute * 60);\r\n            Minute = Minute < 10 ? '0' + Minute : Minute + '';\r\n            Second = Second < 10 ? '0' + Second : Second + '';\r\n            var time = Minute + \":\" + Second;\r\n            return time;\r\n        },\r\n        selectItem(item, index, e){\r\n            if (this.currentMusic.id && item.id === this.currentMusic.id) {\r\n                this.setPlaying(!this.playing)\r\n                return;\r\n            }\r\n            this.$emit('select', item, index);\r\n        },\r\n        delectItem(index){\r\n            this.$emit('del', index);\r\n        },\r\n        getPlayIconType({id: itemId}){\r\n            // console.log(this.currentMusic);\r\n            const {\r\n                playing,\r\n                currentMusic: { id },\r\n            } = this;\r\n            return playing && id === itemId ? 'pause-mini' : 'play-mini';\r\n        },\r\n        ...mapMutations({\r\n            setPlaying: 'SET_PLAYING'\r\n        })\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    // updated(){\r\n    //     console.log(this.list);\r\n    // }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import '../../styles/music.less';\r\n.musicList{\r\n    height: 100%;\r\n    .list-header.list-item{\r\n        .list-singer{\r\n            width: 300px;\r\n        }\r\n        .list-album{\r\n                width: 200px;\r\n                text-overflow: ellipsis;\r\n                overflow: hidden;\r\n                white-space: nowrap;\r\n            }\r\n    }\r\n}\r\n    .list-content{\r\n            width: 100%;\r\n            >div{\r\n                width: calc(100% - 6px);\r\n            }\r\n            .list-num{\r\n                display: block;\r\n                width: 30px;\r\n                margin-right: 10px;\r\n                text-align: center;\r\n            }\r\n            .list-name{\r\n                flex: 1;\r\n                display: flex;\r\n                position: relative;\r\n                >span{\r\n                    width: 100%;\r\n                }\r\n                .list-menu{\r\n                    position: absolute;\r\n                    right: 10px;\r\n                    height: 50px;\r\n                    .iconfont{\r\n                        display: inline-block;\r\n                        font-style: normal;\r\n                        font-weight: 400;\r\n                        font-variant: normal;\r\n                        line-height: 50px;\r\n                        vertical-align: baseline;\r\n                        text-transform: none;\r\n                        speak: none;\r\n                        font-size: 40px;\r\n                        -webkit-font-smoothing: antialiased;\r\n                        &:hover{\r\n                            color: #fff;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            .list-singer{\r\n                    width: 300px;\r\n                    text-overflow: ellipsis;\r\n                    overflow: hidden;\r\n                    white-space: nowrap;\r\n                }\r\n            .list-time{\r\n                position: relative;\r\n                width: 50px;\r\n                i{\r\n                    position: absolute;\r\n                    display: none;\r\n                    font-style: normal;\r\n                    font-weight: 400;\r\n                    font-variant: normal;\r\n                    line-height: 50px;\r\n                    vertical-align: baseline;\r\n                    text-transform: none;\r\n                    speak: none;\r\n                    font-size: 40px;\r\n                    transform: translateX(-100%);\r\n                    -webkit-font-smoothing: antialiased;\r\n                    &:hover{\r\n                        cursor: pointer;\r\n                        color: #fff;\r\n                    }\r\n                }\r\n            }\r\n            .list-album{\r\n                width: 200px;\r\n                text-overflow: ellipsis;\r\n                overflow: hidden;\r\n                white-space: nowrap;\r\n            }\r\n            \r\n            >.list-item{\r\n                &:hover{\r\n                    .list-time{\r\n                        .hover{\r\n                            transform: translateX(5%);\r\n                            display: block;\r\n                        }\r\n                        span{\r\n                            display: none;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    @media (max-width: 1200px){\r\n        .musicList{\r\n            .list-header.list-item{\r\n                .list-singer{\r\n                    width: 150px;\r\n                }\r\n                .list-album{\r\n                    width: 150px;\r\n                }\r\n            }\r\n            .list-content{\r\n                .list-album{\r\n                    width: 150px;\r\n                }\r\n                .list-singer{\r\n                    width: 150px;\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Music-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Music-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Music-list.vue?vue&type=template&id=e3c5f194&scoped=true&\"\nimport script from \"./Music-list.vue?vue&type=script&lang=js&\"\nexport * from \"./Music-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Music-list.vue?vue&type=style&index=0&id=e3c5f194&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3c5f194\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}